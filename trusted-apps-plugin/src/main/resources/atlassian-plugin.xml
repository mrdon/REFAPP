<atlassian-plugin key="${atlassian.plugin.key}" name="${pom.name}" pluginsVersion="2">
    <plugin-info>
        <description>${pom.description}</description>
        <version>${pom.version}</version>
        <vendor name="${pom.organization.name}" url="${pom.organization.url}" />
        <bundle-instructions>
            <Export-Package>com.atlassian.security.auth.trustedapps</Export-Package>
        </bundle-instructions>
    </plugin-info>
    
    <component-import key="userManager" interface="com.atlassian.user.UserManager" />
    
    <component key="encryption-provider" class="com.atlassian.security.auth.trustedapps.BouncyCastleEncryptionProvider" />
    <component key="trusted-apps-manager" class="com.atlassian.refapp.trustedapps.internal.RefAppTrustedApplicationsManagerImpl" />
    <component key="user-resolver" class="com.atlassian.refapp.trustedapps.internal.RefAppUserResolverImpl" />
    
    <servlet-filter key="seraph-trusted-apps-filter" class="com.atlassian.security.auth.trustedapps.seraph.filter.SeraphTrustedApplicationsFilter" location="top" weight="10">
        <url-pattern>/*</url-pattern>
    </servlet-filter>
    
    <servlet key="trusted-apps-management-servlet" class="com.atlassian.refapp.trustedapps.internal.TrustedAppsManagementServlet">
        <url-pattern>/trusted-apps</url-pattern>
    </servlet>
</atlassian-plugin>
